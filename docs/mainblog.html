<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-11-03 Mon 12:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Main Blog</title>
<meta name="author" content="Rylan Lens Kellogg" />
<meta name="description" content="A blog for all things Lens_r." />
<meta name="generator" content="Org Mode" />
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://lensplaysgames.github.io/lensr_blog_v1/mainblog.html"/>
<meta property="og:title" content="Main Blog"/>
<meta property="og:description" content="A blog for all things Lens_r."/>
<link rel="stylesheet" href="/lensr_blog_v1/all.min.css"/>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:site_name" content="Lens_r's Blog"/>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E0F1C2XGCS"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-E0F1C2XGCS');
</script>
<script>function toggle_dark_mode(){var element=document.getElementsByTagName("html")[0],dark_button=document.getElementById("dark-mode"),d=(element.classList.toggle("dark-mode"),new Date);d.setTime(d.getTime()+24192e5),element.classList.contains("dark-mode")?(document.cookie="dark_mode=true; expires="+d.toUTCString()+"; path=/",dark_button.innerHTML="Light Mode"):(document.cookie="dark_mode=false; expires="+d.toUTCString()+"; path=/",dark_button.innerHTML="Dark Mode")}function goto_top(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function insert_top_banner(){var navbar_html='<nav class="navbar" id="navbar">',navbar_html=((navbar_html+='<label for="hamburger">&#9776;</label>')+'<input type="checkbox" id="hamburger"/>'+'<div id="hamburger-items">'+"<a href='/lensr_blog_v1/'\">Home</a>"+'<a target="_blank" href=\'https://www.paypal.com/donate/?hosted_button_id=62KQ4GX6HFTNG\'">Donate</a>'+'<a target="_blank" href=\'https://www.youtube.com/@Lensr\'">YouTube</a>'+'<a target="_blank" href=\'https://www.twitch.tv/lens_r\'">Twitch</a>'+'<a target="_blank" href=\'https://www.github.com/LensPlaysGames\'">GitHub</a>'+'<a target="_blank" href=\'https://discord.gg/FTQsgqQEM4\'">Discord</a>'+'<a id="dark-mode" onClick={toggle_dark_mode();}>Dark Mode</a>'+"</div></nav>",document.body.firstElementChild),navbar_and_contents=document.createElement("div");navbar_and_contents.innerHTML='<nav class="navbar" id="navbar"><label for="hamburger">&#9776;</label><input type="checkbox" id="hamburger"/><div id="hamburger-items"><a href=\'/lensr_blog_v1/\'">Home</a><a target="_blank" href=\'https://www.paypal.com/donate/?hosted_button_id=62KQ4GX6HFTNG\'">Donate</a><a target="_blank" href=\'https://www.youtube.com/@Lensr\'">YouTube</a><a target="_blank" href=\'https://www.twitch.tv/lens_r\'">Twitch</a><a target="_blank" href=\'https://www.github.com/LensPlaysGames\'">GitHub</a><a target="_blank" href=\'https://discord.gg/FTQsgqQEM4\'">Discord</a><a id="dark-mode" onClick={toggle_dark_mode();}>Dark Mode</a></div></nav>'+navbar_html.outerHTML,navbar_html.replaceWith(navbar_and_contents)}function main(){insert_top_banner();var cookies=decodeURIComponent(document.cookie).split(";");for(let i=0;i<cookies.length;i++){for(;" "==cookies[i].charAt(0);)cookies[i]=cookies[i].substring(1);0==cookies[i].indexOf("dark_mode")&&"true"==cookies[i].substring(name.length,cookies[i].length).split("=")[1]&&toggle_dark_mode()}}window.onload=main;</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Main Blog</h1>
<div id="outline-container-org535289f" class="outline-2">
<h2 id="org535289f">HOW TO WRITE POSTS</h2>
<div class="outline-text-2" id="text-org535289f">
<p>
First of all, a kind of overview of how this works. Each top-level heading (one star) with the "blogpost" tag will be exported by the publishing system to its own file, and have its own webpage on the website that will be linked to from the main blog page. Everything else <i>does</i> get exported to HTML, but only within the (not linked) <code>mainblog.html</code>. Which means readers of the blog won't see it :^).
</p>

<p>
Here's an example blog post. It's quite simple. It has a title (the headline of the top-level org heading). It has a <code>blogpost</code> tag. It has a unique <code>CUSTOM_ID</code> property and the date published (inserted with <code>M-x org-time-stamp-inactive</code>, or at least in the format of it).
</p>

<p>
Anything within this subtree will then be a part of the blog post. For now, there aren't any fancy CSS things going on, except for code being syntax highlighted. In the future I may add more properties so that certain pieces of text may be marked up in unique ways, but for now, we're going bare org-mode.
</p>

<div class="org-src-container">
<pre class="src src-org">\* Ooops, out of order! :blogpost:
  <span class="org-org-drawer">:PROPERTIES:</span>
  <span class="org-org-special-keyword">:CUSTOM_ID:</span> <span class="org-org-property-value">outofordertest</span>
  <span class="org-org-special-keyword">:CREATED:</span> <span class="org-org-property-value"><span class="org-org-date">[2023-05-29 Mon 12:40]</span></span>
  <span class="org-org-special-keyword">:PUBLISHED:</span> <span class="org-org-property-value"><span class="org-org-date">[2023-05-29 Mon 12:40]</span></span>
  <span class="org-org-special-keyword">:MODIFIED:</span> <span class="org-org-property-value"><span class="org-org-date">[2023-05-29 Mon 12:40]</span></span>
  <span class="org-org-special-keyword">:OG_IMAGE:</span> <span class="org-org-property-value">images/myimage.png</span>
  <span class="org-org-special-keyword">:OG_DESCRIPTION:</span> <span class="org-org-property-value">A short hook to make readers click the link!</span>
  <span class="org-org-special-keyword">:POST_TAGS:</span> <span class="org-org-property-value">lorem, ipsum, dolor, sit, amet</span>
  <span class="org-org-drawer">:END:</span>

  Hmm, will this be in order?
</pre>
</div>

<p>
NOTE: CUSTOM<sub>ID</sub> and PUBLISHED are always required.
</p>

<p>
NOTE: The OG<sub>IMAGE</sub> property is optional, but, if provided, sets the open graph/twitter card image (og:image) that will be displayed when the page is linked to from social media sites. OG<sub>DESCRIPTION</sub> may also be set in order to explicitly set og:description.
</p>

<p>
NOTE: POST<sub>TAGS</sub> property is not yet used yet, but will eventually be used for users to be able to find posts by tag.
</p>

<p>

</p>
</div>
</div>
<div id="outline-container-orgd8c3d68" class="outline-2">
<h2 id="orgd8c3d68">2025 Ideas</h2>
<div class="outline-text-2" id="text-orgd8c3d68">
</div>
<div id="outline-container-orgdd04c50" class="outline-3">
<h3 id="orgdd04c50">Literate Compiler/Programming Tests with Org Mode and Emacs</h3>
<div class="outline-text-3" id="text-orgdd04c50">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>

<ul class="org-ul">
<li>RunTest test suite</li>
</ul>

<p>
Wrote first draft <span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 11:02]</span></span>
</p>
</div>
</div>
<div id="outline-container-org2cf87e1" class="outline-3">
<h3 id="org2cf87e1">Abusing the C++ Type System&#x2014;LCC's Instruction Selection Implementation</h3>
<div class="outline-text-3" id="text-org2cf87e1">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>

<ul class="org-ul">
<li>isel<sub>patterns.hh</sub></li>
</ul>
</div>
</div>
<div id="outline-container-org6468b3d" class="outline-3">
<h3 id="org6468b3d">Glint's Basic Grammar</h3>
<div class="outline-text-3" id="text-org6468b3d">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>
<ul class="org-ul">
<li>once I flesh it out, go over the single expression, group expression, call expression stuff, and why it fundamentally is a different grammar than C or LISP or Rust.</li>
<li>accompanying video possibly?</li>
</ul>
</div>
</div>
<div id="outline-container-orga62a0c7" class="outline-3">
<h3 id="orga62a0c7">Formatting Glint using Emacs and Rust</h3>
<div class="outline-text-3" id="text-orga62a0c7">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>
<ul class="org-ul">
<li>glint-ts-mode formatting implementation using tree sitter queries</li>
</ul>
</div>
</div>
<div id="outline-container-orgc12d9ba" class="outline-3">
<h3 id="orgc12d9ba">My Very Own Emacs&#x2014;How I Wrote a LISP-based Text Editor</h3>
<div class="outline-text-3" id="text-orgc12d9ba">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>
<ul class="org-ul">
<li>LITE tree sitter and graphical implementation</li>
<li>accompanying video possibly?</li>
</ul>
</div>
</div>
<div id="outline-container-org0dea0a8" class="outline-3">
<h3 id="org0dea0a8">Implementing Org mode in Glint</h3>
<div class="outline-text-3" id="text-org0dea0a8">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-11-03 Mon 09:53]</span></span>
</p>
</div>
</div>
</div>
<div id="outline-container-2025glintcallgrammar" class="outline-2">
<h2 id="2025glintcallgrammar">Glint's Quirky Call Syntax</h2>
<div class="outline-text-2" id="text-2025glintcallgrammar">
<p>
In case you don't know, I'm the creator of and main contributor to the Lensor Compiler Collection (abbreviated <i>LCC</i>). I am also the designer and creator of a language LCC compiles, <i>Glint</i>. Herein lies the quirks of Glint's syntax, and why it took so long to put together a formal grammar (or, even a comprehensive tree-sitter one).
</p>

<p>
Glint is, well, Glint. You know it when you see it, and there's a couple reasons for that. One is that it is quite opinionated, but also not at all. You'll see what I mean.
</p>

<p>
Let's take a look at what is often the most noticeable difference between Glint and other popular programming languages, like C and LISP: call expressions.
</p>
</div>
<div id="outline-container-org4a38b58" class="outline-3">
<h3 id="org4a38b58">Implicit Invocation</h3>
<div class="outline-text-3" id="text-org4a38b58">
<p>
Let's assume we have some function <code>foo</code> which takes no parameters, and we want to call it.
</p>

<p>
In C:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-function-name">foo</span>();
</pre>
</div>

<p>
In LISP:
</p>
<div class="org-src-container">
<pre class="src src-lisp">(foo)
</pre>
</div>

<p>
Now, in Glint:
</p>
<div class="org-src-container">
<pre class="src src-glint">foo;
</pre>
</div>

<p>
Uhhh&#x2026; Where are the parentheses?! Well, you see, this is one place where Glint keeps it interesting: implicit invocation. That is, the semantics of Glint state that an expression with a function type may be implicitly converted to an invocation of that function, and the type of the expression updated to the return type of the function. That's just a fancy way of saying, for a function with no parameters, you don't need to use parentheses to call it. Cool! I like typing less.
</p>

<p>
NOTE: the idea for implicit invocation is inspired from Algol 68; LCC's test suite was originally written in Algol just for the fun of it.
</p>
</div>
</div>
<div id="outline-container-org7e50ae8" class="outline-3">
<h3 id="org7e50ae8">Calls With Arguments</h3>
<div class="outline-text-3" id="text-org7e50ae8">
<p>
Now, let's assume we have some function <code>bar</code> which takes two integer parameters, and we want to call it.
</p>


<p>
In C:
</p>
<div class="org-src-container">
<pre class="src src-c">bar(27, 42);
</pre>
</div>

<p>
In LISP:
</p>
<div class="org-src-container">
<pre class="src src-lisp">(bar 27 42)
</pre>
</div>

<p>
Now, in Glint:
</p>
<div class="org-src-container">
<pre class="src src-glint">bar 27, 42;
</pre>
</div>

<p>
Wait, where are the parentheses? That's right, Glint doesn't associate parentheses with call expressions in any scenario. You never need them, unless you do (more on that later).
</p>

<p>
The reason behind this design choice was simple: I like LISP, but I hate (yet also understand) when people complain about the noise of the parentheses. So, Glint attempts to be as LISP-like as possible while not requiring any in the most common cases. Like how English changes a lot of word's hard-to-make sounds to the schwa sound (IPA É™) to make it easier and quicker to say, Glint alters the syntax of expressions to not require parentheses (or <i>noise</i>, in general) in as many places as possible.
</p>
</div>
</div>
<div id="outline-container-org803c5d5" class="outline-3">
<h3 id="org803c5d5">When Things Get Complicated</h3>
<div class="outline-text-3" id="text-org803c5d5">
<p>
Now, you may be wondering something: if a call is just (at least) two expressions next to each other, how do we parse binary operators in relation to calls?
</p>

<p>
That is, how should the following be interpreted?
</p>
<div class="org-src-container">
<pre class="src src-glint">blah 27 + 42;
</pre>
</div>

<p>
Is this a call expression, with callee <code>blah</code> and <i>one</i> binary expression argument <code>27 + 42</code>?
</p>

<p>
Or, is this a binary expression, with a call expression <code>blah 27</code> on the left hand side, and <code>42</code> on the right hand side?
</p>

<pre class="example" id="org4e5a587">
Call
|-- identifier: blah
`-- Binary: +
    |-- number: 27
    `-- number: 42
</pre>

<pre class="example" id="org5da8ff5">
Binary: +
|-- Call
|   |-- identifier: blah
|   `-- number: 27
`-- number: 42
</pre>

<p>
If you are familiar with writing parsers, than you are probably thinking, "Normally, we'd handle this sort of thing with precedence."
</p>

<p>
Unfortunately, there is one more quirk of Glint we have to consider, and it's that some unary prefix expressions share the same token with binary infix expressions; of those, <code>&amp;</code> is the most common. <code>&amp;</code> as a unary prefix operator gets the address of it's contained expression. <code>&amp;</code> as a binary infix operator performs a bitwise AND operation on it's contained expressions, and returns the result.
</p>

<p>
Now, how should the following be interpreted?:
</p>
<div class="org-src-container">
<pre class="src src-glint">blah &amp;x;
</pre>
</div>

<p>
To most, it would make most sense, if <code>blah</code> is a function accepting a pointer argument, that this would be a call to that function with a single argument.
</p>

<p>
Notice, however, how that interpretation <i>depends</i> on the type of the object that the identifier <i>blah</i> refers to. Information like that isn't available until after semantic analysis, which means a formal grammar can't encode that information into it. So, if we want the grammar to not be (ULTRA) ambiguous, we have to decide on a rule to parse this.
</p>

<p>
You may be thinking, "If we already parsed the declaration of blah, doesn't the parser already know it's type?"&#x2014;and you would be correct. <i>If</i> the declaration of <code>blah</code> happens to be before this expression, then yes, we could know that. The problem is that Glint's function declarations are not in any order; you can use a function before defining it, since call expressions don't need resolved until semantic analysis (AFTER <i>everything</i> has been parsed). This means that, at the time of parsing, you cannot guarantee that you will know the type of anything (and that tracks, since parsing shouldn't really do anything based on types other than parse them). Because of this, we can't conditionally parse a call or a binary expression based on the type of the lhs, and we can't just collect these parsed expressions and figure it out in semantic analysis because each path would further change the parsed tree (i.e. precedence wouldn't apply properly).
</p>

<p>
Okay, so, our rule (mentioned above) is as such: binary expressions are parsed <i>before</i> call arguments. So, if there is a prefix unary operator <i>that may also be a binary infix operator</i> directly following some parsed expression, it is treated as the binary infix operator. Notice that this is different from precedence, since we encounter a token that could either be a binary operator containing this expression, and should be parsed, or a unary prefix one for a further expression, that should be not parsed until parsing the next expression.
</p>

<p>
This means, sadly, that the concession of an unambiguous grammar means we have to sacrifice this specific use case of parentheses if we want it to be a call. Do note that the parentheses have nothing to do with it being parsed as a call; they are just a way to group expressions explicitly so that precedence doesn't come into effect.
</p>

<p>
A similar issue applies to subscript not knowing <i>how</i> tight to bind with respect to calls. Is <code>foo 42[0];</code> a subscript of the call <code>foo 42</code>, or is it a call of <code>foo</code> with a <code>42[0]</code> subscript argument?
</p>

<p>
As you can see, there <i>would</i> be an ambiguity here if not for the following rule: a binary expression may not directly contain a call expression. If you want to apply a binary expression to a call, group the call's expressions with parentheses and subscript the paren expression.
</p>

<p>
So, binary expressions actually only accept a subset of Glint's expressions (ones that aren't calls). This is put in practice by the simple ordering of gathering binary operators before call arguments during parsing (such that a call is parsed <i>after</i> binary expressions are, it can't directly appear as a child of one (since it hasn't yet been parsed) (because the binary expression binds more tightly)).
</p>

<pre class="example" id="orge596955">
lhs = ParsePrimary();
lhs = ParseBinary();

if (at separator)
  return lhs;

lhs = GatherCallArguments();
</pre>

<p>
This means, for our subscript example, <code>foo 42[0]</code>, <code>foo</code> is parsed as a primary expression (identifier), there is no valid binary operator and no expression separator, so we treat <code>foo</code> as a callee and begin gathering call arguments. We parse <code>42</code> as our primary, and, now, there <i>is</i> a valid binary operator (<code>[</code> for subscript operation), so we parse that with the lhs being <code>42</code>. As you can see, a binary operator can never have a call as it's left hand side, because a call hasn't been parsed yet. This effectively means that the lhs of a binary expression is not allowed to be a call expression, which reduces the ambiguity in the grammar.
</p>

<p>
So, for <code>-</code> and <code>&amp;</code>, both unary prefix and binary infix operators, they "can't" appear as unary operators as the direct first argument to a function call. They <i>can</i>, however, appear as unary operators as the direct child of a paren expression, so we "escape" to the full Glint grammar using parentheses. This allows Glint to be as parentheses-less as possible, unless they are absolutely needed to disambiguate the expression.
</p>

<p>
I am currently considering altering bitwise and operator to be <code>bit&amp;</code> instead of just <code>&amp;</code>, so that parentheses wouldn't be needed in the addressof case (since that tends to be somewhat common).
</p>

<p>
If you are interested in how this sort of grammar would be parsed, there is the LCC implementation in C++, and a tree-sitter grammar declared in JavaScript with a very understandable structure.
</p>
</div>
</div>
</div>
<div id="outline-container-2025literatetests" class="outline-2">
<h2 id="2025literatetests">Literate Tests with Org Mode and Emacs Lisp</h2>
<div class="outline-text-2" id="text-2025literatetests">
<p>
In case you don't know, I'm the creator of and main contributor to the Lensor Compiler Collection (abbreviated <i>LCC</i>).
</p>

<p>
LCC has design the standard: "no third party dependencies". That means that I have written the code that transforms source code into tokens, as well as the code that issues diagnostics, as well as the code that selects machine instructions to emit, as well as the code that emits said machine instructions. As well as about 18 kajillion other steps that I'm omitting (not for sake of brevity, but because they've been blocked out by my subconscious in an attempt to protect me from the horrors of the world).
</p>

<p>
While that's all well and good, I'm only human, and humans make mistkaes; especially over the course of years, which is how much time I have sunk into this little hobby project. The issue with a compiler collection is, well, <i>finding</i> the bugs. Sometimes they are bugs of omission (i.e. not doing something that is actually required), sometimes they are bugs of logical error (i.e. my mental model is incorrect and doesn't match reality), sometimes they are off-by-one bugs, or accidentally using <code>+</code> instead of <code>+=</code>. It's not easy to just scan through code and find bugs; it often requires a deep understanding of <i>what</i> the compiler is <i>trying</i> to accomplish, not the code that is currently there (otherwise, it wouldn't be buggy code).
</p>

<p>
On top of all that, the compiler performs many data transformations, separated and grouped into stages. This means that, if one stage is wrong, the problem often <i>appears</i> in another stage, despite <i>originating</i> from an earlier one. For example, if semantic analysis of a language fails to set the type of some node, and that language's IR code generation tries to read the type and gets <code>NULL</code>, it will crash <i>in IR generation</i>, not in semantic analysis&#x2026;
</p>

<p>
All of <i>that</i> to say, compilers are inherently complex systems, and complex systems have lots of places for errors to be introduced, and often have lots of <i>other</i> places for errors to actually manifest.
</p>

<p>
This is why, for compiler collections, <i>testing</i> is of the utmost importance. At it's most basic definition, a test is just an assertion of some output after some transformation is applied to some input.
</p>

<p>
LCC has many testing frameworks in place to ensure all parts of the codebase work as expected (or, at least, I'm working on it). But, one of these frameworks is of interest today: <i>RunTest</i>.
</p>
</div>
<div id="outline-container-orgcb8be7d" class="outline-3">
<h3 id="orgcb8be7d">RunTest</h3>
<div class="outline-text-3" id="text-orgcb8be7d">
<p>
You can think of RunTest as an end-to-end testing framework for LCC. That is, it treats LCC as a black box, and just pushes data through it to get an expected output. The catch is that the output is automatically compiled with LCC, linked with GCC, and then the resulting binary executed; RunTest asserts the output of <i>that</i> binary, given an input of a source language to LCC.
</p>

<p>
Specifically, RunTest asserts the exit status and printed output of the final binary.
</p>

<p>
So, unless we want a single test to span across multiple files (something that I abhor), we need <i>some</i> sort of polyglot file format which may contain arbitrary source code, binary data (in case of asserting the program outputs control characters, NUL bytes, etc), and a number for the exit status.
</p>

<p>
We <i>could</i> just use a <code>.txt</code> file, but, if we include binary data, a lot of text editors (which is what <code>.txt</code> files will be opened with, by default) will crash, or display unexpected/wrong characters. This is not good for the test author, as you may imagine. On top of that, some languages that LCC supports may not support comments; that means that if we relied on defining tests within a language, the language's lexer would have to work in tandem with the test suite. That doesn't quite match our "arbitrary" source code specification, does it?
</p>

<p>
I was writing some documentation for Glint, typing some Glint source code in a source block within an Org mode file using Emacs, when I realized that I already had the answer. <i>That</i> is when it hit me: Org mode. I write source code of arbitrary languages in Org mode <i>all the time</i>. In fact, I do it for this blog. Why not use Org mode to write tests in? We can include binary data with example blocks, and we can include source code. Obviously, we can write a number in an Org file&#x2026; It fits our specifications! On top of that, it allows the author of the test to define it <i>literately</i>, i.e. with included text to describe (any part of) the test.
</p>

<p>
The one "downside" to this is that Org mode is deeply tied into the Emacs ecosystem; in fact, the sole implementation of Org mode <i>is</i> Emacs. There aren't really parsers available for Org mode files that don't use Emacs itself. So, if we want to extract the test data from our Org mode test files, we need to use&#x2014;you guessed it&#x2014;Emacs!
</p>

<p>
Of course, Emacs is wonderful and provides Emacs Lisp, so we can just write a script, and Emacs will run it for us whenever we ask (just like Bash).
Emacs is also very portable (just like Bash) ((holy heck, it even runs on my <i>phone</i> now!!)), so I think anyone who wants to hack on LCC will be able to get a working Emacs on their system.
</p>

<p>
With that out of the way, I decided on a basic syntax for the tests; here's Glint's "Empty File" test.
</p>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* Empty File</span>

In Glint, an empty program is completely valid.

The rules for implicit return at the top level still apply.
So, because the last expression is not of <span class="org-org-verbatim">=int=</span> type, Glint inserts <span class="org-org-verbatim">=return 0;=</span>.

<span class="org-org-meta-line">#+NAME: source</span>
<span class="org-org-block-begin-line">#+begin_src glint
</span><span class="org-org-block-end-line">#+end_src
</span>
<span class="org-org-meta-line">#+NAME: status</span>
<span class="org-org-block-begin-line">#+begin_example
</span><span class="org-org-block">0
</span><span class="org-org-block-end-line">#+end_example
</span>
<span class="org-org-meta-line">#+NAME: output</span>
<span class="org-org-block-begin-line">#+begin_example
</span><span class="org-org-block-end-line">#+end_example</span>
</pre>
</div>

<p>
The name of the test is the top-level headline, and the following named blocks constitute the test's source code input, and the test's expected status and output when the resulting binary has been run.
</p>

<p>
As you can see, a test author may mark up the different portions of their test with explanations, information, or whatever data is needed to understand the test case and why it is the way it is.
</p>

<p>
Now, an LCC contributor may define some language input and assert that it properly compiles to a program with the given semantics. This asserts that the binding between language and compiler is properly aligned, and semantics are preserved. For example, if semantics are not preserved, the language may be generating IR that doesn't match their intentions, or LCC may have a bug in it where it isn't respecting some feature of the IR when applying a transformation, or it could be a cosmic ray sent by aliens, bit-flipping your RAM just for funsies.
You never know with these computer things.
</p>

<p>
Either way, it's good to have a system that alerts you when things are broken, rather than <i>gasp</i> <b>silently</b> producing broken code (my nightmare), and this framework does that in a (I believe) neat and tidy way.
</p>
</div>
</div>
<div id="outline-container-orgdf00b17" class="outline-3">
<h3 id="orgdf00b17">Oh, Yeah</h3>
<div class="outline-text-3" id="text-orgdf00b17">
<p>
I forgot to mention, the org syntax accepts multiple source blocks, each one compiled separately and their artifacts collected to link together properly. This means that, if your language has modules or something like that, you can define a module and a program that uses it, and RunTest will automagically compile it properly. This means that Module/Type/AST serialisation and deserialisation may be tested by RunTest as well, which is a large pain-point for a lot of language developers (binary formats tend to be annoying like that).
</p>
</div>
</div>
<div id="outline-container-orgd670ae5" class="outline-3">
<h3 id="orgd670ae5">Deep Dive</h3>
<div class="outline-text-3" id="text-orgd670ae5">
<p>
You can read actual RunTest tests at <code>runtest/corpus/</code> within the <a href="https://github.com/LensPlaysGames/LensorCompilerCollection">LCC repository</a>. This can be a good way to get a feel for a language LCC compiles, as there are lots of example programs combined with an assertion of exactly what they do.
</p>

<p>
Still interested? Go read <code>runtest/runtest.el</code> within the <a href="https://github.com/LensPlaysGames/LensorCompilerCollection">LCC repository</a>; it showcases a lot of very LISPy things, like <code>gensym</code>, macros, asynchronous subprocesses, and more, while still being short and sweet.
</p>
</div>
</div>
</div>
<div id="outline-container-orgd0bcb59" class="outline-2">
<h2 id="orgd0bcb59">empty space</h2>
<div class="outline-text-2" id="text-orgd0bcb59">
<p>

</p>
</div>
</div>
<div id="outline-container-org482d7c5" class="outline-2">
<h2 id="org482d7c5">Fun Titles / Idea Dump</h2>
<div class="outline-text-2" id="text-org482d7c5">
</div>
<div id="outline-container-org0c3d1fb" class="outline-3">
<h3 id="org0c3d1fb">How I Built Rome in a Day</h3>
<div class="outline-text-3" id="text-org0c3d1fb">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-06-01 Thu 16:14]</span></span>
</p>
</div>
</div>
<div id="outline-container-org0c0db76" class="outline-3">
<h3 id="org0c0db76">I Use Org Mode For Everything From Work to Play</h3>
<div class="outline-text-3" id="text-org0c0db76">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-07-07 Fri 08:42]</span></span>
</p>
</div>
</div>
<div id="outline-container-org1c43bcf" class="outline-3">
<h3 id="org1c43bcf">Conlang Showcase: Tlai-Tli (early)</h3>
<div class="outline-text-3" id="text-org1c43bcf">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-07-07 Fri 08:43]</span></span>
</p>
</div>
</div>
<div id="outline-container-org4d9afe4" class="outline-3">
<h3 id="org4d9afe4">Calculating My Content Creation Wage (it's negative)</h3>
<div class="outline-text-3" id="text-org4d9afe4">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2023-07-07 Fri 08:43]</span></span>
</p>
</div>
</div>
</div>
<div id="outline-container-aglintofhoep" class="outline-2">
<h2 id="aglintofhoep">A Glint of Hope</h2>
<div class="outline-text-2" id="text-aglintofhoep">
<p>
Out with the old, in with the new!
</p>
</div>
<div id="outline-container-orgf9b3f23" class="outline-3">
<h3 id="orgf9b3f23">Glint</h3>
<div class="outline-text-3" id="text-orgf9b3f23">
<p>
A programming language that is somewhat usable to do very basic systems things.
</p>
</div>
<div id="outline-container-org8bf86f9" class="outline-4">
<h4 id="org8bf86f9">Sum Types</h4>
<div class="outline-text-4" id="text-org8bf86f9">
<p>
Instead of repetitive type boilerplate with inheritance, use sum types.
</p>

<p>
C++: Encoding meaning in the designation of a type itself vs within a larger encapsulating type. Best described by example.
</p>
<div class="org-src-container">
<pre class="src src-c++"><span class="org-keyword">class</span> <span class="org-type">type</span> {
  ...
};
<span class="org-keyword">class</span> <span class="org-type">function_type</span> : <span class="org-type">type</span> {
  <span class="org-type">vector</span> <span class="org-variable-name">arguments</span>;
  ...
};
<span class="org-keyword">class</span> <span class="org-type">integer_type</span> ...
</pre>
</div>
<p>
You get the gist. This bloats immensely fast, exponentially, where adding a trivial type like an integer requires an entire class wrapping it. And then also adding to the "kind" enum in the base class(es).
</p>

<p>
In Glint, sum types let us represent these sort of structures with less boilerplate. Do this instead.
</p>
<div class="org-src-container">
<pre class="src src-nil">type : sum {
  function :[argument];
  integer :int;
};
</pre>
</div>
<p>
And I didn't even need to `&#x2026;` anything, that's all of it. No enum required. Only as many type declarations as you actually need.
</p>


<p>
You can also use sum types for implementing a result type very easily.
</p>
<div class="org-src-container">
<pre class="src src-nil">index_t : sum {
  error :[byte];
  value :uint;
};
</pre>
</div>
<p>
Getting an index to something but don't want to require some sentinel values reserved for error state communication? Use a sum type! Return a dynamically allocated bytestring for an error message, or return a meaningful value.
</p>
</div>
</div>
</div>
<div id="outline-container-org4e63be0" class="outline-3">
<h3 id="org4e63be0">Tendency Towards Distemper</h3>
<div class="outline-text-3" id="text-org4e63be0">
<p>
I have this terrible habit of being just <i>slightly</i> too ambitious such that I become increasingly frustrated with my smidgen of inability to achieve what I want to, how fast I want to. It makes me so frustrated and grows into rage, until
I explode. Eventually, I slow down (just slightly, begrudgingly) and solve the problem. It is like pushing harder and harder when getting tired on a bike until you literally can't go anymore, collapsing, getting mad at yourself and the bike, and then eventually, after some rest, getting back on the bike and doing it all over again.
</p>
</div>
</div>
<div id="outline-container-orgc8b3dda" class="outline-3">
<h3 id="orgc8b3dda">Glint Line Count as of 2024.07.26: 10005</h3>
<div class="outline-text-3" id="text-orgc8b3dda">
<p>
Line count on Glint language only using <a href="https://github.com/AlDanial/cloc">https://github.com/AlDanial/cloc</a>.
</p>
<pre class="example" id="orgfecb712">
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
C++                              8           1472           1689           8123
C/C++ Header                     7            556            421           1882
-------------------------------------------------------------------------------
SUM:                            15           2028           2110          10005
-------------------------------------------------------------------------------
</pre>

<p>
Design started on Glint on June 25, 2024, with development beginning shortly thereafter. Line count above as of July 26, 2024. It's amazing what can be done in a month.
</p>
</div>
</div>
<div id="outline-container-orgff02820" class="outline-3">
<h3 id="orgff02820">Food for Thought</h3>
<div class="outline-text-3" id="text-orgff02820">
<p>
Why are <code>enum</code> and <code>struct</code> highlighted as a keyword but <code>void</code> and <code>bool</code> are highlighted as types&#x2026;?
</p>
</div>
</div>
</div>
<div id="outline-container-makingmistkaes" class="outline-2">
<h2 id="makingmistkaes">Making Mistakes</h2>
<div class="outline-text-2" id="text-makingmistkaes">
<p>
CW: Lots of sensitive topics including abuse, suicide, and more coming up. You've been warned :/
</p>

<p>
I've made mistakes.
</p>

<p>
Over and over and over again.
</p>

<p>
I don't really know why this article exists. Maybe it's so that the reader knows they can make it past their own mistakes, even seemingly egregious ones. Maybe it's just for me to come to terms with what happened in my life. Maybe it doesn't actually serve any purpose.
</p>

<p>
Like everyone, I was born. The newcomer to a family of four, a fifth wheel. My parents got divorced when I was three years old. In the state I live in, the courts <b>always</b> side with the mom. So, even though she was wildly unfit to be a mother, that's where all three children ended up and stayed. Likely, this is the worst thing that could have happened to me. I'm not here to drag anyone through the mud or start a pity party, though.
</p>

<p>
Elementary school was lonely. I didn't understand how other kids would just go to school, have a fun time, talk to people, draw, etc. whereas it felt like all I did was sit there, and that took the entirety of my effort. Looking back, I can see now a stressed child&#x2014;a neglected one. Why talk if the adults already made up their mind about everything and will steamroll my opinion anyway? Either way, I was quiet, I listened, and I was absolutely abysmal at social interactions (well, that was my feeling at the time). But at least I was "smart": every single teacher, authority figure, you name it, would mention my (apparent) intelligence and how I was so distinguished from any other child they know. That really made it hard to feel like I could ever fit in with my peers, as they were just children and took to saying and doing what the adults did (i.e. ostracising me). To make matters worse: I had to get (thick) glasses in 3rd grade at 8 years old (needed them much sooner tbh), I was small and skinny (probably somewhat due to malnourishment and somewhat due to genetics), and I had absolutely zero self esteem. This puts me smack-dab in the center of the "terrible childhood" starter kit. Hurray!
</p>

<p>
Most recesses (20 minutes of play time for young kids at school), I would simply get on the swings and swing as high as possible. It's hard to notice <i>nobody talking to you</i> when you're launching yourself 20 feet in the air :). Attempts at sports were met with blood, and attempts at friendship were met with bullying. It was during elementary school that I saved up for a laptop (which didn't matter because mom stole the savings, but she did buy me <i>a</i> laptop ig)&#x2014;The first computer that was "mine". I got heavily into video games and stuff like that. Minecraft, Terraria, No More Room In Hell, Counter Strike, GMod, Happy Wheels&#x2026; I started watching let's plays on YouTube, finding PewDiePie, Jacksepticeye, and Markiplier. I would host servers on Hamachi and beg/convince people at school to please try and play with me. I was able to convince one person in the 4th grade, and me and them played video games together all the time until about 7th/8th grade. I hosted a teamspeak server and we would hop in it and game all day.
</p>

<p>
When I got to middle school, things were about to go downhill, and fast (Note: "Middle school" is between primary and secondary school, usually just two to three years). As my home life kept worsening, so did my effort put forth in school. My mom began to constantly tell me that we were moving soon, but then, when it came time to pack up and go, it had actually been delayed by two weeks. When we did end up moving, it was only for a few months before the cycle would repeat. At the end of 7th grade, at 12 years old, we were living in a somewhat bad neighborhood, and my mom was behind on payments, so the house had no AC, and power would go out for a week or two every few months.
</p>

<p>
Needless to say, that summer absolutely sucked.
</p>

<p>
I tried to keep in touch with a few friends, but the school I went to for that school year was now nowhere near where I actually lived&#x2026; Mostly, they forgot about me, and I forgot about them. I had a bike at that time, so I started going on bike rides every day; it was summer, and there wasn't anything else to do. At first, I'd just go out in the daytime, but it ended up getting so hot that that wasn't realistic anymore. So, I just sort of naturally started waking up earlier when it wasn't so hot and going on bike rides then. Eventually, this grew into waking up at 1&#x2013;2am, and biking until 8&#x2013;12am, every day.
</p>

<p>
While it may sound advantageous for a young chap to ride a bicycle for 6&#x2013;10 hours per day (and truthfully, it is), it's important to note a few things that culminated in this not going well. One: I was in a somewhat bad neighborhood. Two: I was only 12 to 13 years old during this. Three: I was going out at 1&#x2013;2am. This is starting to paint a slightly more worrying picture, right? Imagine you had a 12 year old, and they snuck out every night at 2am&#x2026;
</p>

<p>
Anyway, worst comes to worst, I end up finding leftover remnants of blunts and joints on the side of the road. At first, I just avoided them. But after seeing them so much, I decided to start to "collect" them (although I still avoided the orange-capped needles). It was exhilarating even interacting with these <i>illicit</i> things. Questions like "Am I doing something wrong?" and "Will I be caught and put in jail?" would go through my head. I'm not one to try and understand why I started doing something I knew was wrong, but, to me, at the time, it just felt like that there was nothing else to do, and not much of a point <i>not</i> to do it (other than the usual adult lies: thing bad). Eventually I found what is colloquially known as a "chillum". I'll save you the details, but it's a rudimentary smoking device; this one was made out of wood. This was different from all the ruined joints and blunts, as it was meant to be <i>refilled</i> and then used, not just thrown away. After a few weeks of anxiety, I tried to light whatever was still in it and inhaled; immediately it tasted horrible, I was coughing, and there was smoke coming out of me. Being a child with very little ability for accurate forethought, I did all this <i>in my bedroom</i>, which now <b>strongly</b> smelled of ash (and shame). In a panic to not get caught, I started opening windows; I turned on every fan I could in the house, etc., and then I microwaved popcorn right before my mom got home XD.
</p>

<p>
Now, let's take a moment and pause, as that was a lot (and I'm skipping a lot). Yes, I was 12, I guess I collected butts of weed off the side of the road and then smoked them in a smoking device I found on the side of the road, and that was my first experience with recreational drugs. YOU, READER, yes you, please don't do this. This article is called making mistakes (or something), and as such contains stuff you should NEVER do; not to mention at 12 years old.
</p>

<p>
A few months later, there was a drive-by shooting directly outside the house, aimed at the house across the street. No one was hurt, luckily. After that, with winter rolling around, there was a gigantic wind storm. It took out power for the entire town for multiple weeks in the winter. On top of this, my mom was (as always) behind on bills, and so we had no heating in the house at this time (we had been relying on electric space heaters). It got down under 60 in the house at night; I would sleep under three blankets and still be freezing when I woke up. We were then evicted and moved in with my mom's parents. Sadly, they are much the same as my mom.
</p>

<p>
Now, after a few more "chillum" attempts (and actually <i>outside</i> this time), I stopped trying. It just wasn't that fulfilling, and it tasted and smelled really strongly, and it was not good (I attribute that to the side-of-the-road source&#x2026;). But I still felt "proud", I guess you could call it, for doing something myself. Soon enough, school started again: 8th grade.
</p>

<p>
When I went back to school, people were now talking about, like, going on vacation, or having gone on a cruise, or how they had an amazing birthday party or went snowboarding, or&#x2026;
</p>

<p>
Well, I didn't do any of that. I just rode my (old) bike. So the whole first week in class of "Who are you?" and "meet each other" activities was just torture &#x2026; "Oh, so you didn't do anything and just sat at home?" was a question I heard quite often. They couldn't understand that it wasn't a choice that I stayed home all summer&#x2014;it was due to being in a less fortunate situation. So, immediately, I felt <i>extra</i> disconnected from everybody going into this year.
</p>

<p>
Because I was feeling so disconnected, different, and just straight-up <i>bad</i>, I started to believe that something was wrong with me; that I must be crazy or stupid or defective somehow for my life to feel so unfulfilling, different, and boring. And this is when I started my "chasing" phase, as I would call it. I was chasing <i>feeling</i>. Anything that made me feel was something I would do, because so much of my life felt like nothing. So I chased girls and said whatever I thought they wanted me to say to get what I wanted. I chased that feeling I had in the summer when I tried drugs for the first time. I chased acting out in class and socially just to see what would happen (often nothing happened, which is the saddest part). I would argue and disagree with people even when I knew I didn't actually think that way, and it didn't actually matter. If you have any experience with kids, I'm sure you can tell exactly what this is: <b>attention seeking</b>. I literally just needed somebody watching me/with me (ideally my parent(s) would have filled this role), but I had nobody. I did drugs at 12 with nobody catching me &#x2026; that shows just how attentive my mom was as a parent. My mom would lie to my dad when asked how things were going, obviously, and so my situation flew under the radar.
</p>

<p>
What's worse? The society I live in. Attention seeking kids are ignored and/or ridiculed, usually by adults and children. Adults don't want to "give in" to the attention seeking behaviour of the child, and other children make fun of the child ("you're just doing that for attention"). None of this is what an attention seeking child needs. But, nonetheless, it's what they get.
</p>

<p>
It started subtly. I stopped caring about my outfit or wardrobe, just grabbing whatever and putting it on. Shorts in the winter and jeans in the summer; just whatever I happened to grab. I stopped showering (unless to get away from everybody for 30 minutes), and I stopped paying attention in school. All of these things felt "wrong", but nobody stopped me from doing them. In fact, nobody even noticed or cared.
</p>

<p>
I thought, "I'll have to go more extreme, I guess."
</p>

<p>
It grew less subtle. I began actively trying to change things, even if it was for the worse. So I started messing up my hair every morning before school, purposefully staining my clothes, staying up all night so that I'd be dead tired all day at school, etc. I changed from the "Alright team, we can still do this!" team player in counter strike to "I wonder if I can kill all 4 teammates before I get vote-kicked." I began seeking avenues of obtaining drugs, once more.
</p>

<p>
I began cutting myself every day. It started out in hidden places, and places that wouldn't hurt so bad. Struggling to get anyone to help me or notice my situation, I began to run out of hidden places that weren't already cut/still healing. I can remember a pivotal point where my mindset shifted as I sat and wept. "Fuck it, I'm done hiding", I thought. I cut both of my forearms so much that there was nothing <i>but</i> blood, it seemed. All the way from wrist to elbow. They were small, shallow cuts, but there sure were a lot of them. The next morning I woke up and knew exactly what to do. I put on a short-sleeved tshirt, and headed off to school. To be honest, there was a pit in my stomach. "What's going to happen to me?"&#x2026; "Are they going to tell my parents?"&#x2026; so many questions rushed through my head.
</p>

<p>
However, my wishes were not fulfilled on this day. Mostly, my faith in humanity was lost.
</p>

<p>
I showed up to first period 10 minutes early. Most kids will socialise in the halls as long as possible and show up late even, so it was just me, one or two other classmates, and the teacher. I walked in, sat at my assigned seat, and put my arms on the desk in front of me. The scabs had opened just from walking through the halls and bumping into people, so I was now actually oozing blood out of a few of my wounds. I expected there to be a commotion from the teacher, something like "Oh my God, what happened?", and I planned to say "I cut my arms." My plans were dashed, however, as the teacher looked up, saw me, and looked back at their phone. The bell rang, and they began to hand out papers. "Surely, at this point, this seemingly kind and sweet teacher will talk to me about my absolute horror show going on." But no; she walked by my desk, locked eyes with me, set the paper on my bleeding arms, then moved on to the next. "Surely, at this point, she has seen the situation, doesn't know what to do, and will like email the school counselor and then they'll come get me." But no; I was <i>hoping</i> that when she sat back at her desk and started typing that that is what she was doing, but it wasn't. I had tried, in the most extreme way, to get attention, and it had not worked. I felt <i>bad</i>. Not, like, just bad, like life is not worth living bad. The rest of that schoolday, my classmates gave the response I needed an adult to give, and the adults gave me the response I needed the classmates to give. The children were in shock that I would do something like that to myself, and a lot of them asked me why I did it. The adults ignored me; I laughed as the principal walked by at lunch, we locked eyes, I held my arms up, and they just looked away and kept going on with their life.
</p>

<p>
So, let's do a sad little recap, shall we? I was already in such a bad place mentally (and physically) at 12 years old that I thought it a good idea to try recreational drugs. When I got back to school, everyone else's life was so different that I just didn't understand where to fit in anymore, which drove me even further away and made me more different. This kept getting more and more extreme, to the point that I began cutting myself, both for attention and control, which culminated in me giving up on hiding anything or trying to be anybody. I started just being 100% honest with people. "How'd you cut your arm?" was now answered in a monotone voice, "With a blade." I began to think that the school did know about my situation, but that they just didn't care (which almost 100% had to be the case; I didn't hide much from that point on). This reinforced my bad self-esteem even further. Things were now &#x2026; serious.
</p>

<p>
And that's exactly when it got worse :)
</p>

<p>
At 13, I managed to get a hold of drugs I should <i>not</i> have been able to get a hold of, due to my parent and grandparents leaving pill bottles around. While they are childproof, they aren't foolproof, as I managed to get them open. At first I planned to take every pill in every bottle I could find. But then I got worried that I would just end up eating like ten benadryl, and I wouldn't die, I'd just get really sick and have to tell everybody what had happened. So I started doing research on the names on the sides of the pill bottles to find out exactly which ones to take and how many. This led to me discovering that when you take <i>some</i> pills you actually feel good from it and get high. This immediately sparked that old feeling from the summer before, like I was doing something wrong, but it felt good and I could get away with it, so why not. I discovered a bottle of <code>hydrocodone</code>, a very strong opiate painkiller. I took just one, and that was the moment I completely lost control. It may sound like a fear-mongering campaign, but it really is true. At that time, my life sucked so bad and felt so awful that having a pill that would actually make me feel warm and joyful and just laugh at nothing available <i>literally</i> at my fingertips was &#x2026; well, more than unfortunate.
</p>

<p>
For a while, it was just from time to time. Steal a pill once or twice a week, and take one when you feel so awful that you can think of nothing except suicide. At this point, I began to tell everybody at school when I was on pills, and how great they made me feel compared to "normal". Of course, nobody actually believed me. It was the same as before. I would do something that I thought would have irreversible consequences, and not only would there be no consequences, <i>nobody would even believe that I did it when I loudly bragged about it</i>. It felt like, no matter what I did, my life would have the same outcome, and I had no control over it.
</p>

<p>
After a little bit of this (exact times are hazy from this time period, go figure), my addiction grew. It grew from my "helper" from time to time into an almost everyday occurence. This was helped by the fact that one of my grandparents was now getting extra hydrocodone from their friend every month (illegally, now that I think about it), so the supply had gone up. Along with more hydros, I started to steal and take other pills, too. When summer rolled around, I was left alone, and one or all of tramadol, lorazepam, and hydrocodone were now coursing through my veins almost 24/7. This is when the people that would come over to my house to hang out began to see this happen, and most of them stopped interacting with me altogether because of this. I don't blame them, that was the healthiest decision they could have made for themselves. Eventually, a few <i>other</i> people got involved, and it was basically a constant party/hangout at my place with lots of bad decisions being made.
</p>

<p>
I would say this is a good point to stop and point out a clear mistake: <i>don't</i> give up on school and friends just to start taking pills everyday at thirteen years old. It doesn't turn out well, I promise you.
</p>

<p>
9th grade rolled around: "high school" in American terms. This new school had way more people in it, but to me, not much changed. I was still just an invisible cog in a useless machine that they ran for profit. My test being completed got them grant money, that's it. With my addiction worsening, I now felt like I had to take multiple doses per day just to feel normal; this meant I was now taking pills to school with me. And <i>now</i>, people did finally believe me (kind of hard to doubt something happening right in front of you, lol). This is when other people started wanting them&#x2026;
</p>

<p>
I'll skip over some details here for legal and privacy reasons, but I will sum it up. Before, only one or two people actually knew about it and believed me, and they weren't focused on that part of life, so they didn't even want to take pills that much or anything. High school changed all of that, though, and in an instant. All of a sudden, <i>lots</i> of people were <i>very</i> interested in this sort of thing, and in their eyes, I was the avenue to get it. I'll leave the rest as an exercise for the reader.
</p>

<p>
You may be surprised to hear that I wasn't actually failing school during all this. At the start, my addiction hadn't affected my life very much; it was just something I did "for fun" once or twice a week. As my 8th grade year went on, sure, my grades got <i>worse</i>, but I still managed to keep up and pass every class that year. 9th grade, going into high school, I had an over 100% grade in every class for the first six months, through extra credit that I would complete in school and just doing marginally well on tests.
</p>

<p>
The addiction kept getting worse, though, and as 9th grade progressed, I stopped going to school as much. I would wake up for school, take a pill (or ten), then just lay back in bed and do nothing all day. After a few days I would go into school, each class hands me "what I missed", I finish it in like 15 minutes and then leave for the bathroom and never come back. I realised that I pretty much already knew everything they put on the tests (as it was covered in the first two weeks of the semester), so I didn't really even have to be <i>at</i> school to pass. This is a <i>clear</i> failure of the system, as I should <i>not</i> have been able to pass whilst basically not going at all. But that's what happened. I passed 9th grade with my lowest grade being a 74% (in like social studies, or something).
</p>

<p>
That summer it got <i>way</i> more intense. The "endless party" vibe was basically my life now. Invite friends, get really fucked up together and do stupid shit, wake up, then do it all again. I didn't tell anybody, but, for a long time, I would take as many pills as I had to try and see if it would kill me. Most of the time, I'd just wake up a few days later, and go back to the monotony. I felt severe shame over not being able to control the <i>end</i> of my life, even&#x2026;
</p>

<p>
At this point, I had very minimal cashflow (but still some), so I began purchasing things online. I bought drug paraphernalia, mostly. Bongs, legal plant extracts, and more. I even found some unsavory places and bought some less-than-legal things online, as well. Needless to say, expanding an addict's reach is <i>never</i> a good thing.
</p>

<p>
My newfound reach was met with newfound curiosity; I was still chasing that feeling, <i>any</i> feeling. I had seen a lot of people mention psychedelics online, and the writings and reports that resulted from such activities greatly piqued my interest. So, I made it a mission to source some. While I was working on that, I started going on walks into the woods, just trying to get away from everybody and everything. On the way to the woods, on one of these walks, I saw what looked like a Nintendo DS case: a small, zippered container about six to eight inches in its longest dimension. I grabbed it and kept walking, wondering what might be in it (I could tell <i>something</i> was in there).
</p>

<p>
After I got home, I opened the case, expecting a handheld game console to reveal itself to me. But, alas, I was not so lucky. I opened it to see a spoon, about ten little baggies, some full, some empty, a lighter, some needles&#x2026; I had found somebodies stash that they threw out the window when getting pulled over.
</p>

<p>
Now me, being an addict and an idiot all in one, decided it'd be a great idea to order some needles of my own and try to do some of the drugs I found on the side of the road (and people call me "smart", lol). And I did. Not only this, but there was somebody else there who video'd the whole thing. I'm not proud :(
</p>

<p>
Although it is quite embarassing, I still uphold that that day was probably the best I have ever felt in my entire life. I just sat for four straight hours laughing and giggling at stupid, meaningless TV shows, and I felt like I was getting a warm hug the whole time. From this point on, I would take even more pills to try and get this feeling again (which I never did, and now believe never will).
</p>

<p>
In the passing days, I forgot about my previous curiosities with psychedelics, but eventually they swayed back into my mind. I found out that there are actually legal psychedelics, and I ordered some of those online. A little baggy showed up with small bits of leaf inside it, dark-colored; the label read "20x&#x2013;40x STRONG &#x2014; not for human consumption". That sure instilled confidence in me XD. This baggy sat in my stash for some time, as I gained the courage to try it. However, that wasn't the only venture I made; I had also obtained another infamous substance: LSD. That was the first psychedelic I tried; I did just one, then after an hour of not noticing anything, I took one more (classic!). A few minutes after taking the second one, <b>it started</b>. As I looked at my bed, the wrinkles of sheets along the side began to fly, as if there was a great gust of wind blowing through an open window. But, when looking to the windows, they were all closed. That's when I realised it wasn't actually happening; I was just seeing it. This caused me to laugh and giggle at it, just watching as it blew in the ephemeral wind. I discovered a new genre of music that I really liked. I "saw" unity and what that actually means. I met myself for the first time, realising what I must be like, look like, talk like, and walk like. The universe shifted to make room for me, and I shifted to make room for the universe; overall, it was as if a great tension was undone on that day.
</p>

<p>
After the first time, I waited a week or two, then did it all over again. I was looking forward to it so much that I didn't even realise I had stopped taking pills every day (and confused as to why I had withdrawal symptoms; I thought I was sick with cancer or something as I was throwing up everyday, couldn't eat, etc). Eventually, that little baggy made its way back into my mind. "Oh yeah, that!", I exclaimed. Having had some real-life experience, I was a bit over-confident assuming I could do any psychedelic and handle it really well. I was wrong :).
</p>

<p>
I loaded the "STRONG" extract into a pipe and, as I was instructed to do for this substance, held a flame as close to it and for as long as possible. Apparently, the substance in the extract requires lots of heat to be vaporised. After one long, hot inhalation, I quickly realised I had gotten myself into something <i>way</i> bigger than I thought. The room vibrated (like an earthquake), and I felt <b>weird</b>. A fractal-like pattern started growing out of the center of my vision, obscuring the real world; I had a bit of a panic that I was still holding my pipe, and I didn't want to break it, so I quickly sat it down. As soon as I sat it down, I was gone. This body and this world were no longer available to my experience; I had gone elsewhere. I remember feeling like I was falling backwards at 1000000mph, reaching out to catch myself and failing (more like flailing, ha!). Other than that, there aren't really words to describe what I experienced (sorry).
</p>

<p>
What being away from my body and away from this world made me realise is that I wanted nothing more than to be in my body and in this world; I was begging to please just let me go back to "my bed", even though that was completely gone and didn't exist anymore. When I did start to come down (about five minutes later) and back into my body, I bee-lined it for my bed, laid down, and tried to forget all about the terrifying experience I'd just had.
</p>

<p>
This was the experience that changed my life from being a loser, an addict, and bound to die before thirty into what it is now: without this experience, I would not have understood the full range of possible experiences. The universe <i>allows</i> for mistakes, it <i>allows</i> for you to exist; you might be a terrible, rotten person now, but that doesn't mean you can't buy a candy store and give 1000s and 1000s of people joy and happiness through little desserts and treats. Well, it might be tough to get a loan as a felon, but you get my point.
</p>

<p>
This experience lit a fire under my ass, and <i>fast</i>. I immediately unenrolled from school; at this point in my life, it was a burden that drained my mental and physical health, as well as a source of bad decisions. So, a few months into the 10th grade, I was no longer in high school. As per the terms of my unenrollment, I had to do some program that would supposedly help me get my GED; I won't go into it now, I will just say that that program exists solely to destroy lives, and everyone within it is a selfish demon who deserves immediate (and slow) dismemberment. I <i>didn't</i> get my GED.
</p>

<p>
A week or two after I unenrolled from school, my mother texted (yes, <i>texted</i>) me that she didn't know what to do anymore and that I needed to move out by the end of the day. I was shocked to receive such a message, and didn't exactly know what to do. I was either going to become homeless, kill myself using up the last of my stash, or move in somewhere else&#x2026; I figured that last one sounded better than the second, albeit unrealistic (who would want to deal with me at this point in my life); so, I called my dad and told him the situation. He was generous and kind enough to let me move in with him <i>that day</i>, and I can't thank him enough for that. I easily would have made some very bad decisions that day if that call had gone even slightly differently. So, I packed everything I wanted (not much) into my school backpack, and he picked me up later that day. Just like that, I was gone.
</p>

<p>
My mother texted relentlessly for weeks about how she didn't mean it and how I needed to move back in with her "or else". I just ignored her, as I still do. What is written here is simply what I am willing to share publicly, and it doesn't paint her in a nice light, to say the least. She is an abuser, she is manipulative, and she is a liar. That text message kicking me out was my saving grace; without it, I'd still be tangled in her shitty life.
</p>

<p>
<b>The best thing I ever did was separate myself from that wretch of a human.</b>
</p>

<p>
For a few years, it was tough just existing; I was still dealing with the impulses of addiction, while at the same time being 16 and dealing with regular teenager problems. I didn't enjoy this part of my life; it felt like a major "downgrade" compared to before. Instead of being high all day, every day, I wasn't, and that really put a hamper in my mood.
</p>

<p>
Eventually, though, things changed. The "old me" is no longer someone I can even relate to; I can barely understand why they did the things they did. But I can also see that that person was abused. That person was neglected. That person was treated so poorly that nothing else even seemed possible.
</p>

<p>
But that's not <i>me</i>. That's just how I had to deal with the cards I was dealt. Left to my own devices, I am so much more than that. For a long time, I didn't believe in these sorts of ideas. I thought that the reason my childhood went so poorly was my fault, and that I must be defective and unable to cope with things in a normal way. However, when I finally escaped my addiction, escaped my abusers, escaped the terrible situation I was born into, I didn't do any of that. On my own, I just liked learning and creating new things. I made music, I made video games, I baked bread, and I built electronics. And so, it all of a sudden was very clear to me: "I" am <i>not</i> my actions. "I" am <i>not</i> my past. "I" exist, and that's pretty much the only objective thing that can be said about me (or anything, for that matter). "I" is a plastic, an unbaked clay, not an unchanging stone, or a molded sculpture.
</p>

<p>
A few years after this mess, I began low-level programming. About a year after starting that, I began streaming content to Twitch and uploading the VODs to YouTube, and the rest is history.
</p>

<p>
Again, I don't really know <i>why</i> this article exists, but I hope that you at least got something out of it.
</p>
</div>
</div>
<div id="outline-container-financialcommandlinemanagement" class="outline-2">
<h2 id="financialcommandlinemanagement">How I Manage My Finances From the Command Line</h2>
<div class="outline-text-2" id="text-financialcommandlinemanagement">
<p>
I don't know about you, but the pit in my stomach that develops when I don't know my own finances is <i>humongous</i>. The relief I feel when I just know I can pay bills, everything is fine, I'm saving money, etc. is worth the work I put into it.
</p>

<p>
The crux of my financial handling came when I discovered a piece of free and open source software known as Ledger CLI. It was a "double-entry accounting" software; I didn't know what that meant, but as someone looking to fix that pit in my stomach, I was happy to try it out.
</p>

<p>
While double-entry accounting <i>is</i> a little bit to wrap your head around, it's also a really good way to think about transactions, so I think it's worth the effort. The main idea of double entry accounting is that you don't just keep track of where money goes, but also where it comes from; i.e. if you pay $15 (flat) for a video game, you would subtract $15 from your bank account but also add $15 to the <i>expense</i> account related to video games. This lets you see not only your current balance, but <i>where</i> your money is going, what you are spending it on.
</p>

<p>
Unlike most accounting software I've found, which use either a proprietary (yuck!) binary "project" format or CSV, Ledger uses a plain-text file that <b>you</b> maintain however you'd like to; the software <b>never</b> alters your ledger file. To add a new transaction, you open the file in a text editor and add an entry; it is quite a human-friendly format, once you get the basics down.
</p>
</div>
<div id="outline-container-org6bd6c3d" class="outline-3">
<h3 id="org6bd6c3d">Transactions</h3>
<div class="outline-text-3" id="text-org6bd6c3d">
<div class="org-src-container">
<pre class="src src-ledger">2023/07/14 Starbucks
  Expenses:Wants:Coffee  $9.08
  Assets:Checking
</pre>
</div>

<p>
While it may be slightly confusing as to what exactly is going on, I have a good way to break it down for you. The date is in year/month/day format, followed by the "payee"; think of the payee like the name you would write on a check, or who is receiving the money: in this case, Starbucks. The following lines, indented with at least one space, are the postings of the transaction. Each posting has an account and an amount, which must be separated by at least two spaces. The accounts are entirely up to you how you keep track of things, just know they are hierarchical; that is, the total of `Expenses` will include the total of `Expenses:Wants`. While you <i>are</i> able to use any accounts you would like (there is no requirement) Ledger CLI recommends these five top level categories, and all of your accounts are sub-accounts of the main five. I highly recommend this system as well, to keep your ledger reports, well, legible, and to make sure others can help you if you need it.
</p>

<ol class="org-ol">
<li>Expenses: where money goes,</li>
<li>Assets: where money sits,</li>
<li>Income: where money comes from,</li>
<li>Liabilities: money you owe,</li>
<li>Equity: the real value of your property.</li>
</ol>

<p>
With these five top-level accounts, it makes it quite easy to describe most transactions relatively easily with only one or two specifying accounts.
</p>

<p>
Continuing on the coffee posting up above: you probably noticed the posting on the very bottom has no amount; this is because we are taking advantage of Ledger's ability to automatically calculate the amount needed to make the transaction equal to zero. In double entry accounting, you keep track of both where money comes from <i>and</i> where money goes, so all the postings in a transaction should add up to zero. In this case, Ledger will calculate <code>$-9.08</code>, as there is only a single posting without an amount. If you want, you could always write this value explicitly, but I see no reason to. After writing an entry like this in your ledger file, you can then run reports on it. We'll talk more about that after going over what it looks like when you get payed.
</p>

<div class="org-src-container">
<pre class="src src-ledger">2023/07/14 Me
  Assets:Checking  $69.420
  Income:Salary
</pre>
</div>

<p>
The date is self-explanatory, I would hope :Ãž. As you can see, <i>you</i> are now the one receiving the money, which means you get to write your name, "me", etc. in the payee section. The money is credited <i>into</i> your checking account, and being sourced <i>from</i> the salary account (where your salary is paid from). Personally, I like to further specify <i>which</i> salary I'm being paid using a sub-account, as at times you may have multiple.
</p>
</div>
</div>
<div id="outline-container-orge3f5832" class="outline-3">
<h3 id="orge3f5832">Generating Basic Reports</h3>
<div class="outline-text-3" id="text-orge3f5832">
<p>
Finally, let's get to the meat and potatoes of Ledger CLI; the reports it can generate.
</p>

<p>
Let's imagine the following ledger file, <code>./.test.ledger</code>.
</p>
<div class="org-src-container">
<pre class="src src-ledger">2023/06/17 Me
  Assets:Checking  $69.420
  Income:Salary

2023/06/19 Starbucks
  Expenses:Wants:Coffee  $6.84
  Assets:Checking

2023/07/14 Me
  Assets:Checking  $69.420
  Income:Salary

2023/07/14 Starbucks
  Expenses:Wants:Coffee  $9.08
  Assets:Checking
</pre>
</div>

<p>
Here is the <code>balance</code> report, which should always add up to zero; it tells you where money comes from and where money goes.
</p>

<pre class="example" id="org0f2a109">
$ ledger -f ./.test.ledger bal
            $122.920  Assets:Checking
             $15.920  Expenses:Wants:Coffee
           $-138.840  Income:Salary
--------------------
                   0
</pre>

<p>
The <code>balance</code> report is the one I use the most often; it lets me see how much money is left in my accounts/budget, as well as how much money has been allotted to different expenses.
</p>

<p>
One of the most powerful features of Ledger is it's ability to <a href="https://ledger-cli.org/doc/ledger3.html#Period-Expressions">specify periods</a>. This means you can specify "this week", "last month", "from 2 weeks ago", etc, and it will generate a report for the transactions within that time frame. With this feature, you can generate quarterly reports as well as see weekly spending habits.
</p>

<p>
As well as the <code>balance</code> report, there is also the <code>register</code> report; this mimics what you might see in a checkbook. The <code>register</code> report makes it easier to see how each transaction adds to the totals that appear in the <code>balance</code> report.
</p>

<pre class="example" id="org283e210">
23-Jun-17 Me                    Assets:Checking             $69.420      $69.420
                                Income:Salary              $-69.420            0
23-Jun-19 Starbucks             Expenses:Wants:Coffee        $6.840       $6.840
                                Assets:Checking             $-6.840            0
23-Jul-14 Me                    Assets:Checking             $69.420      $69.420
                                Income:Salary              $-69.420            0
23-Jul-14 Starbucks             Expenses:Wants:Coffee        $9.080       $9.080
                                Assets:Checking             $-9.080            0
</pre>

<p>
And that's how I manage my finances from the command line :). Interested in <a href="https://ledger-cli.org/">Ledger CLI</a>? This is just the tip of the iceberg. Here is an <a href="https://ledger-cli.org/doc/ledger3.html">online manual</a> (highly recommend).
</p>
</div>
</div>
</div>
<div id="outline-container-comfortablewhenuncomfortable" class="outline-2">
<h2 id="comfortablewhenuncomfortable">Getting Comfortable With the Uncomfortable</h2>
<div class="outline-text-2" id="text-comfortablewhenuncomfortable">
<p>
I got a new job.
</p>

<p>
<i>Yay&#x2026;</i>
</p>

<p>
I am now a Senior Engineer, writing software the likes of which I have never tried to write before. Everyday I am (a little) stressed with the ever-increasing list of things to get do, most of which I have never <code>A.</code> tried before or even <code>B.</code> heard of in my life.
</p>

<p>
I wrote an entire OS, but that didn't teach me how to write a promise-based API in JavaScript.
</p>

<p>
I wrote an entire compiler, but that didn't teach me how to use industry-level tools to create a scalable app that ebbs and flows as the active users fluctuate.
</p>

<p>
What doing those projects <i>did</i> teach me was far more important than those minute details that I've picked up in my first week or two on the job.
</p>
</div>
<div id="outline-container-org4ae3ff3" class="outline-3">
<h3 id="org4ae3ff3">Solo Dolo</h3>
<div class="outline-text-3" id="text-org4ae3ff3">
<p>
When you're all alone, your entire mindset changes. It is either "do" or it doesn't ever get done. When writing the kernel for LensorOS, I didn't have anyone to talk to in real life about it (at least anyone that would understand what the hell a filesystem even is, haha). This meant that most of my work was done alone; chicken-scratched writings in countless notebooks, solving problems that have been solved a million times before. Obviously, I didn't just gain knowledge spontaneously; I still utilised the resources I had available (like the OSDev wiki, among other things). When I say <i>alone</i>, I'm referring to the fact that, within those first four months, the only time I asked anybody for help on how to solve an issue was through a Reddit post that got no responses. With no contributors, no one to bounce ideas off of &#x2026; just <i>me</i>, within the eternal sunshine of my spotless mind, alone and unknowing of what I might find, I meandered onto a lesson that has stuck with me through time.
</p>

<p>
<b><i>No one is there to save you</i></b>.
</p>

<p>
For weeks I would battle a problem, flinging lines of code into file upon file, waiting for one&#x2014;just <i>one</i>&#x2014;solution to work. They often didn't. If I decided at this time, "I don't know how to do it, that means I <i>can't</i> do it without help", then I wouldn't have <i>any</i> programming projects. For every single one of these problems&#x2014;these problems that caused me to yell in frustration, angrily write cuss words, and frantically etch my thoughts into disorganised page after disorganised page of my helpless notebook&#x2014;I would go through a cycle. First, the idea would hit me; the excitement that came with it usually meant I got started right away on designing <i>some</i> sort of system to implement this idea. After an initial design that I thought <i>might</i> work, I'd jump right into implementing it. Usually, about half-way through implementing it, I would run into a road-block that made me realise my design could <i>never</i> work, it's inherently flawed, and I <i>have</i> to redesign it if I ever want this idea to come to fruition. This is where I often spent days/weeks, just desperately hoping for each attempt to be "the one".
</p>

<p>
In these weeks is when the frustration came: every time something didn't work as expected, the program crashed for seemingly no reason, or one piece of code being changed affected an entirely unrelated piece of code. In these moments, it wasn't only frustration that came, but also severe feelings of <i>failure</i>. My notebooks would be filled with phrases like "fucking loser", "idiot", "useless, pathetic fool", and every permutation of those you may possibly think of (and more). In those times, I heavily based my self-esteem on my accomplishments; if I didn't get what I wanted done that day, I'd be in an awful mood and wonder why I should even be alive. Needless to say, there were constant hardships throughout my journey, both mental and technical, but I never once gave up (or let my unhealthy thoughts make me do something I'd regret).
</p>

<p>
TL;DR: Oh, you have a question about how something works? Better just go ask your superior&#x2026; WRONG! Chances are your superior doesn't know this specific, minute detail either, and will have to go through the same channels that <i>you</i> could have to get the information, and then relay it back to you. Companies don't appreciate you off-loading your work onto your coworkers, <i>at all</i>; they want forward thinkers, people who get the job done before it has even started. A problem is only a problem if you haven't solved it yet!
</p>
</div>
</div>
<div id="outline-container-org2379546" class="outline-3">
<h3 id="org2379546">RTFM</h3>
<div class="outline-text-3" id="text-org2379546">
<blockquote>
<p>
Read The Fucking Manual
</p>
</blockquote>

<p>
I didn't have anyone to run to when I wanted to write an assembler for the Intercept compiler; I was the only one who implemented it. What I <i>did</i> have that I could run to when I got lost was the <code>Intel Software Developer's Manual</code>. That manual has everything you could possibly need to know about each and every possible instruction and encoding in x86_64. <b>That manual was all I ever needed</b> to write an assembler for x86_64.
</p>

<p>
Now, did I still take to Googling "how does modrm byte work x86_64"? Of course! <b>There's no need to limit yourself to only one set of knowledge.</b> HOWEVER! The Intel SDM <i>does</i> actually have everything that one may ever need to know about the ModRM byte. That is, this "rule" isn't meant to make you limit your sources of knowledge; it is to exercise the most likely avenue of getting that knowledge first, before you go crying to your peers/superiors about it.
</p>
</div>
</div>
<div id="outline-container-orgf12ac4c" class="outline-3">
<h3 id="orgf12ac4c">A Pile Of Garbage Smells Bad, but Still Smells</h3>
<div class="outline-text-3" id="text-orgf12ac4c">
<p>
<i>Something</i> is always better than nothing in the world of software engineering. GET STARTED. It doesn't matter if your whole idea of what is needed is wrong, your design is flawed, or anything like that; if you are dedicated, you will overcome all of these hurdles and get exactly where you want to go in the end (or somewhere near). For example, I had no idea how to serialise types for the Intercept compiler module description: that didn't stop me from starting up a stream and getting started on an implementation. About half-way through implementing my initial idea (Tag/Length/Value records), I realised that it wouldn't work <b>at all</b> for recursive types (i.e. a struct with a pointer to itself as a member). This didn't stop me; I continued implementing the flawed design, and then went back and thought about how I could change it to fix this new issue I've run into.
</p>

<p>
By continuing to work through the initial roadblock, I was able to reach a point where I made <i>progress</i> towards my goal of serialising types, even though I hadn't yet succeeded. With this progress, Siraide was able to come up with a fix in just a few minutes, and I implemented that in less than an hour. From my broken, shoddy design emerged a functional one.
</p>

<p>
I am not a genius or something because my terrible designs end up working in the end; it's a simple fact that if you begin building something, you <b>will</b> run into issues along the way. <b>If you let these issues stop you, then you will never get anything done.</b> However, if you are able to begin working on a solution to <i>any</i> problem, no matter how small, you will begin making progress on that problem. Keep doing that, and the problem will eventually be so small you don't even notice it.
</p>
</div>
</div>
</div>
<div id="outline-container-assemblynotwhatseems" class="outline-2">
<h2 id="assemblynotwhatseems">Assembly Is <b>Not</b> What It Seems</h2>
<div class="outline-text-2" id="text-assemblynotwhatseems">
<p>
Assembly is as close as you can get to the hardware, right? It basically tells you the exact instructions the CPU will run &#x2026; <i>right</i>?. Well, that may be what it seems like (and what people say), but not necessarily! Modern CPUs do so much more than just read an instruction and execute it, and that is what we will be exploring in this post.
</p>
</div>
<div id="outline-container-org32e3613" class="outline-3">
<h3 id="org32e3613">Why Is This the Prevailing Assumption?</h3>
<div class="outline-text-3" id="text-org32e3613">
<p>
Well, the reason assembly is thought of as "telling the hardware exactly what to do" is because &#x2026; well, it does, strictly from a programmer's point of view. But there's a distinction here that's important. It does not tell the CPU <i>how</i> to do it. So while, yes, you may feed it an assembly instruction to add two numbers, any one CPU may choose to do an OR operation instead, if one of the numbers is known to be zero. This sort of behaviour, where the CPU can technically do whatever it wants as long as the expected result is acquired, allows for <b><b>lots</b></b> of optimisations that would not otherwise be possible. For related reading, see <i>sequential consistency</i> and <i>unspecified behaviour</i>.
</p>
</div>
</div>
<div id="outline-container-orgb3b9e1b" class="outline-3">
<h3 id="orgb3b9e1b">How Can a CPU Do More Than One Thing at Once?</h3>
<div class="outline-text-3" id="text-orgb3b9e1b">
<p>
Imagining a naive CPU pipeline that does one thing at a time, we may arrive at something like this:
</p>

<pre class="example" id="orgdbca20b">
.-&gt;  Decoder -&gt; Processor  -.
`---------------------------+
</pre>

<p>
The "decoder" step would decode the next instruction from memory, located by the instruction pointer, and the processor would get a decoded instruction with which to execute. While this <i>does</i> work, it's also incredibly slower than it needs to be; for example, the decoder would decode an instruction <i>and then sit around doing nothing</i> while the processor step computes the proper value. While the decoder is decoding the next instruction, the processor would sit around and do nothing.
</p>

<p>
NOTE: This is a whole topic in-and-of-itself. See <a href="https://en.wikipedia.org/wiki/Instruction_pipelining">Instruction Pipelining @wikipedia.org</a>
</p>
</div>
<div id="outline-container-org6998967" class="outline-4">
<h4 id="org6998967">Eliminating Dependencies</h4>
<div class="outline-text-4" id="text-org6998967">
<p>
Sitting around doing nothing is <b>never</b> good. Luckily, we can attempt to make the situation better due to one simple fact: computations within the processor can't use or modify the instruction pointer directly (most of the time). This means the decoder <i>could</i> start decoding the next instruction <b>before</b> the processor finishes processing the last instruction decoded. By the time the processor finishes processing, the decoder may already be ready with another instruction to execute. This increases the amount of time the processor spends doing valuable computations, making the CPU faster and computers go brrr.
</p>

<pre class="example" id="org0b164cf">
Decoder -&gt; Decoded Instruction Queue
Pop(Decoded Instruction Queue) -&gt; Processor
</pre>

<p>
As you can see, this <i>eliminates a dependency</i>: the processor no longer relies on the decoder directly, and instead relies on the decoded instruction queue being populated. This idea, this <i>concept</i>, of eliminating a dependency reaches so far down into the roots of modern CPUs that I could not explain it in one article, or even five. Modern CPUs eliminate dependencies on a register's value by renaming registers temporarily (yes, even the "hardware registers" don't actually exist in hardware &#x2026; there is something called a register file and it contains <i>actual</i> hardware registers and the "name" of the register it's currently bound to; this technique is called <i>register banking</i>). This register renaming fixes our little caveat above with the instruction pointer being used in a computation. Just copy the value of the instruction pointer into a new register and rename that register to the instruction pointer for that instruction. Poof! No need to operate directly on the instruction pointer. In fact, this works for all registers.
</p>

<p>
Now, you might be wondering, what is the advantage of eliminating a dependency on a register's value? This is where the next big step in computational speed comes from.
</p>
</div>
</div>
<div id="outline-container-org8e5ccd8" class="outline-4">
<h4 id="org8e5ccd8">Out-Of-Order Execution</h4>
<div class="outline-text-4" id="text-org8e5ccd8">
<p>
That's right; by eliminating an instruction's dependency on a register, we can actually <b>execute</b> that instruction at the same time as another instruction, given they don't have dependencies on one another. Let's take a look at this in actual x86_64 assembly (in Intel syntax today, for funsies).
</p>

<div class="org-src-container">
<pre class="src src-asm"><span class="org-function-name">0</span>      <span class="org-keyword">mov</span> rax, [my_ptr]           <span class="org-comment-delimiter">;;</span><span class="org-comment">#; rax := memory[my_ptr]
</span><span class="org-function-name">1</span>      <span class="org-keyword">add</span> rax, 2                  <span class="org-comment-delimiter">;;</span><span class="org-comment">#; rax := rax + 2
</span><span class="org-function-name">2</span>      <span class="org-keyword">mov</span> [my_ptr + 8], rax       <span class="org-comment-delimiter">;;</span><span class="org-comment">#; memory[my_ptr + 8] := rax
</span><span class="org-function-name">3</span>      <span class="org-keyword">mov</span> rax, [my_other_ptr]     <span class="org-comment-delimiter">;;</span><span class="org-comment">#; rax := memory[my_other_ptr]
</span><span class="org-function-name">4</span>      <span class="org-keyword">add</span> rax, 4                  <span class="org-comment-delimiter">;;</span><span class="org-comment">#; rax := rax + 4
</span><span class="org-function-name">5</span>      <span class="org-keyword">mov</span> [my_other_ptr + 8], rax <span class="org-comment-delimiter">;;</span><span class="org-comment">#; memory[my_other_ptr] := rax</span>
</pre>
</div>

<p>
Attempting to eliminate dependencies in the above code without renaming registers doesn't gain us much; <code>rax</code> is used in <b>every</b> instruction, and therefore each instruction is dependant on the value of <code>rax</code> in the last instruction. Some instructions don't alter the register operand (like storing to memory), but they still require the value of <code>rax</code> to be what it was at the last assignment; because <code>rax</code> can't be reassigned, this store would still not able to be done in parallel with an instruction that sets the value of <code>rax</code>.
</p>

<p>
<i>This</i> is where register renaming takes the spotlight. Because the x86_64 CPU is smart enough to know which instructions set a register and which ones just use them, it can analyse the code it's about to execute and determine register dependencies. For example, instruction 0 sets the value of <code>rax</code> and has no dependencies. Instruction 1 sets the value of <code>rax</code> as well, but this time has a register dependency on the value of <code>rax</code> set by instruction 0. So instruction 1 <i>depends</i> on instruction 0 already having been executed, and they cannot be executed out-of-order (or in parallel). It's a similar situation for instruction 2, as it depends on the value of <code>rax</code> set in instruction 1. However, instruction 3 is where it gets <b>interesting</b>. With the value of <code>rax</code> being set again, but this time from another place in memory, this means that any dependency on the old <code>rax</code> is broken. So instruction 3 has no dependencies, just like instruction 0. Instruction 4 is nearly identical to instruction 1, except this time it's dependent on the value of <code>rax</code> set in instruction 3. Same story for instruction 5, except dependent on instruction 4. Okay, so we can determine the register dependencies of an instruction &#x2026; but what has all this analysis got us? To showcase the value gained from doing this analysis, let's go through and give a unique name to each <i>value</i> of <code>rax</code> that was depended upon.
</p>

<div class="org-src-container">
<pre class="src src-asm"><span class="org-function-name">0</span>      <span class="org-keyword">mov</span> r1, [my_ptr]            <span class="org-comment-delimiter">;;</span><span class="org-comment">#; r1 := memory[my_ptr]
</span><span class="org-function-name">1</span>      <span class="org-keyword">add</span> r1, 2                   <span class="org-comment-delimiter">;;</span><span class="org-comment">#; r1 := r1 + 2
</span><span class="org-function-name">2</span>      <span class="org-keyword">mov</span> [my_ptr + 8], r1        <span class="org-comment-delimiter">;;</span><span class="org-comment">#; memory[my_ptr + 8] := r1
</span><span class="org-function-name">3</span>      <span class="org-keyword">mov</span> r2, [my_other_ptr]      <span class="org-comment-delimiter">;;</span><span class="org-comment">#; r2 := memory[my_other_ptr]
</span><span class="org-function-name">4</span>      <span class="org-keyword">add</span> r2, 4                   <span class="org-comment-delimiter">;;</span><span class="org-comment">#; r2 := r2 + 4
</span><span class="org-function-name">5</span>      <span class="org-keyword">mov</span> [my_other_ptr + 8], r2  <span class="org-comment-delimiter">;;</span><span class="org-comment">#; memory[my_other_ptr] := r2</span>
</pre>
</div>

<p>
Now, with this done, the CPU is smart enough to notice something: instructions 0 through 2 and 3 through 5 are two blocks of instructions that start with <i>no</i> register dependencies.
</p>

<pre class="example" id="org52a8d4e">
0 sets r1
1 uses r1 and sets r1
2 uses r1

3 sets r2
4 uses r2 and sets r2
5 uses r2
</pre>

<p>
As neither of these blocks of instructions depend on each other for any values of any register (CPU state), this means they <b>can</b> be executed out-of-order. So, if the L1 cache has the memory at <code>my_other_ptr</code> already loaded, for example, the CPU could choose to execute the block of instructions that uses that memory more first, taking advantage of the already-populated cache. And that's just for a single CPU with a single logical/arithmetic unit.
</p>

<p>
At some point, humans were smart enough to realise that a CPU already has a clock, registers, instructions, etc, but, <i>for some reason</i>, only ever computes one instruction which operates on one or two registers per clock cycle. By inserting more actual logical and arithmetic units within a single CPU, it's possible for a single computational unit to compute <i>more than one</i> calculation at a time, operating on more than just one or two of its registers. That is, for two sequential <code>add</code> instructions that have no dependencies on each other, it's <b>vastly</b> more efficient to send each to its own ALU and have a single clock cycle cause both of them to do their respective computations, getting both results at the same time. This idea even extends past <code>add</code> instructions. For example, the instruction decoder could be duplicated, allowing for multiple instructions to be decoded at once.
</p>

<p>
With modern processors, this is taken even one step further: the "CPU" has <i>multiple</i> CPUs inside of it, each with their own set of ALUs, register files, and more. Generally, the OS chooses the CPU it starts on as the "main" CPU, and that CPU is used to dispatch heavy computations between the rest. It is up to the OS kernel how this is actually accomplished, and what the other CPUs are used for: this is the job of the <i>scheduler</i> (another topic that I could write a million articles on and barely scratch the surface).
</p>

<p>
Modern CPUs are to assembly what C is to Python. You can use C to implement Python, but it will be a lot more verbose, detailed, and complicated than any equivalent you could come up with in Python. Modern CPUs look at assembly and <i>wish</i> they could operate at such an abstract level, while assembly sees the CPU simply as a means to an end. So, the next time you write (or read) some assembly, remember that the CPU has other things in mind than just <code class="src src-asm"> <span class="org-keyword">add</span> rax, rax</code>.
</p>

<p>
Anyway, thank you for reading this post on assembly. If you enjoyed it, I make Twitch and YouTube content that you might also enjoy. To stay tuned when more posts come out, there is an RSS feed you can subscribe to.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-whatsaprogram" class="outline-2">
<h2 id="whatsaprogram">What <i>Is</i> a Program?</h2>
<div class="outline-text-2" id="text-whatsaprogram">
<p>
This may seem obvious, but it turns out to be quite &#x2026; complex.
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">main</span>() {
  <span class="org-keyword">return</span> 69;
}
</pre>
</div>

<p>
Is the above code a "program"? Most will say yes, in my experience. This immediately throws a wrench into most <i>obvious</i> definitions of program.
</p>

<p>
The code above is not executable; it's simply plain-text within a file. Well, then maybe a program <i>isn't</i> necessarily executable, but <i>some</i> programs <i>may</i> be executed. So "something executable on a computer" isn't really a valid definition of "program".
</p>

<p>
Some, from here, may expand the definition to "something that may be eventually executable on a computer (after some set of transformations)". Another issue arises, however, if we look at the following example.
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">main</span>() {
  <span class="org-keyword">return</span> 69
}
</pre>
</div>

<p>
Is the above code a "program"? If we follow the "eventually executable" definition, it <i>isn't</i>. There is a syntax error, as the <code>return</code> statement is not terminated with a semi-colon. This code, therefore, isn't compileable; it's an "ill-formed program" according to the C standard. So, as we can see, some programs (without changing the source) are not <b>ever</b> executable.
</p>

<p>
So, a program isn't necessarily well-formed, a la compileable, and a program isn't necessarily executable. We're right back to the start: what <i>is</i> a program? To me, someone who "writes programs", it would seem that the things I write would be programs. So let's take this top-down approach, and find out what we already call programs, and <i>only then</i> begin to tighten the definition without excluding anything. What things might be a program?
</p>

<ul class="org-ul">
<li>An executable file (in any format) is definitely a program.</li>
<li>An object file may contain portions of or all of a program or programs.</li>
<li>Source code is thought of as a program ("programmers write programs").</li>
</ul>


<p>
From there, then, let's try to fit a definition to this set of things. There's one thing you may notice: they <i>all</i> have code in them &#x2026; just in <b>very</b> different forms. An executable file has machine code in it (among other things that tell the computer <i>how</i> to execute the file). The object file has machine code in it (or intermediate representation if using link-time optimisation). And finally, for the source code, it's even in the name. So, as <i>vague</i> as it is, I think that we can begin to narrow our idea of "program".
</p>

<p>
A "program" is <i>some form</i> of instructions meant for a computer to do computations.
</p>

<p>
So that C code up above? Well, it's only written with the intent that that sequence of tokens in that language will produce a given computation. "Code" is just instructions meant for a computer, no matter if that is machine code, C code, or LISP.
</p>

<p>
However, this definition <i>does</i> come with its own host of caveats. For example, the source code of a program fits the definition of "instructions meant for a computer", but so does the executable file generated after compiling that code. In that case, are there <i>two</i> programs? Or just one program in two different formats? I think this is a question of philosophy, truthfully. To me, it makes the most sense that there <i>are</i> two programs, they just have a set of instructions in different formats that <i>happen</i> to tell the computer to do the same thing (unless your compiler is borked/I wrote it).
</p>
</div>
<div id="outline-container-orge873cb8" class="outline-3">
<h3 id="orge873cb8">Etymology of "program"</h3>
<div class="outline-text-3" id="text-orge873cb8">
<p>
The word "program" is derived from Greek <i>programma</i>, meaning "a public written notice". (See? Even the Ancient Greeks knew that software should be open to the public :Ãž.) In the 1600s, it was used in concert and theatre, referring to an outline of what was going to happen that day (i.e. features presented, persons participating, etc). We can see from its early use that a program defines what is going to happen during a performance.
</p>

<p>
In the mid-1900s, when computers came about (thanks Alan), it stood to reason that something that tells you what the computer is going to do while it is running (during its <i>performance</i>) would be a <i>computer program</i>. And this is when it kind of got out of hand. Computers back then used punch cards as input; those punch cards, naturally, became known as programs. And at this point, everything still makes relative sense. It's not confusing what a computer program is.
</p>

<p>
<b>And that's exactly when it got confusing.</b>
</p>

<p>
Computers seriously blossomed in the years following its discovery/invention. New hardware, new software, good times. Computers upgraded from full-room behemoths that munch on punch-cards to somewhat-reasonable (although still large) machines programmed in assembly. And with this shift came an important distinction: programmers now write assembly code, but the computer no longer executes that directly. The assembly is first <i>assembled</i> into machine code, and only then is that executed by the computer. The people who used to punch cards to tell the computer what to do? Well now they wrote source code. But to them, they were still doing the same thing: telling computers to do some computations. "Something a programmer writes" <i>must</i> be a "program", so therefore the source code a programmer writes <i>must</i> be a "program". On the other end, a computer would read a punch card and do execution/computation based on it. That means that the compiler's output, the actual thing fed to the computer to make it do computation, <i>also</i> ended up being called a "program", even though these two things have been separated in reality.
</p>

<p>
Because there was no longer a physical punch card tied to a "program", the original meaning of "program" (a printed list of features, persons participating, etc. at a concert/theatre) no longer applies <i>at all</i>. The <i>concept</i> stayed (a list of things that tells humans what's going to happen), but the actual meaning was transformed greatly. At this point, arbitrary bits on some magnetic tape were now a program. The baby was, in fact, thrown out with the bath-water.
</p>
</div>
</div>
<div id="outline-container-org866ea7b" class="outline-3">
<h3 id="org866ea7b">A Definition of "program" that I Am Comfortable With</h3>
<div class="outline-text-3" id="text-org866ea7b">
<p>
To me, there <i>isn't</i> a clear-cut definition of program. No matter which one you choose, there are unintuitive corner-cases. However! That does not stop me from <i>choosing</i> a definition that I am comfortable with.
</p>

<p>
What if "program" actually equates to "instructions that tell a computer to do computations". While this <i>is</i> incredibly vague, it is also just specific enough. For example, when you write C code, you are attempting to instruct the computer on how to do execution/computation in order to give you the result you want. And when you compile that C code into an executable, the executable also contains instructions that tells a computer how to do computations, just in a different format.
</p>

<p>
As with every definition of program, there are imperfect corner cases, but this is one I'm okay with: the <i>source code</i> and the <i>executable produced from that source code</i> are entirely separate programs that happen to have instructions within them that produce the same result (assuming a well-written compiler).
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer>
  <div class="footer-row">
    <button onClick="goto_top()" title="Go to top of page">Back to Top</button>
  </div>
  <div class="footer-row">
    <a target="_blank" href="https://www.paypal.com/donate/?hosted_button_id=62KQ4GX6HFTNG">Donate</a>
    <a target="_blank" href="https://www.youtube.com/@Lensr">YouTube</a>
    <a target="_blank" href="https://www.twitch.tv/lens_r">Twitch</a>
    <a target="_blank" href="https://www.github.com/LensPlaysGames">GitHub</a>
    <a target="_blank" href="https://discord.gg/FTQsgqQEM4">Discord</a>
  </div>
  <div class="footer-row">
    <a target="_blank" href="/lensr_blog_v1/rss.xml">Feed/RSS</a>
  </div>
  <div class="footer-row"><span>Made with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 30.2 (<a href="https://orgmode.org">Org</a> mode 9.7.11)</span></div>
</footer>
</div>
</body>
</html>
